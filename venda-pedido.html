<!DOCTYPE html>
<html>

<head>
  <!-- Required meta tags-->
  <meta charset="utf-8" />
  <meta name="viewport"
    content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, viewport-fit=cover" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <!-- Color theme for statusbar (Android only) -->
  <meta name="theme-color" content="#FF4B00" />
  <!-- Your app title -->
  <title>VITATOP - Vendas e Pedidos</title>
  <!-- Path to Framework7 Library Bundle CSS -->
  <link rel="stylesheet" href="lib/framework7-bundle.min.css" />
  <!-- CSS PERSONALIZADO PARA MENU-->
  <link rel="stylesheet" href="css/index.css" />
  <link rel="stylesheet" href="css/carrinho.css" />
  <link rel="stylesheet" href="css/dashboard.css" />
  <!--Ícones Material Design-->
  <link rel="stylesheet" href="css/materialdesignicons.min.css" />
  <!-- Icones do Remix icon-->
  <link rel="stylesheet" href="css/remixicon/remixicon.css" />
  
  <style>
    /* Estilos específicos para as abas */
    .tabs-container {
      background: #ffffff;
      border-radius: 16px;
      margin: 0 16px 20px 16px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
      border: 1px solid #e5e7eb;
      overflow: hidden;
    }

    .tabs-header {
      display: flex;
      background: #f8fafc;
      border-bottom: 1px solid #e5e7eb;
    }

    .tab-button {
      flex: 1;
      padding: 16px 20px;
      background: transparent;
      border: none;
      font-size: 16px;
      font-weight: 600;
      color: #6b7280;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .tab-button:hover {
      background: #f1f5f9;
      color: #374151;
    }

    .tab-button.active {
      background: var(--verde-escuro);
      color: white;
    }

    .tab-button.active::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: var(--verde-escuro);
    }

    .tab-button i {
      font-size: 18px;
    }

    .tab-content {
      display: none;
      padding: 20px;
    }

    .tab-content.active {
      display: block;
    }

    /* Estilos para os filtros específicos de cada aba */
    .filtros-vendas,
    .filtros-pedidos {
      margin-bottom: 20px;
    }

    /* Responsividade */
    @media (max-width: 480px) {
      .tabs-container {
        margin: 0 12px 16px 12px;
      }
      
      .tab-button {
        padding: 14px 16px;
        font-size: 14px;
      }
      
      .tab-button i {
        font-size: 16px;
      }
    }
  </style>
</head>

<body>
  <!-- App root element -->
  <div id="app">
    <!-- Your main view, should have "view-main" class -->
    <div class="view view-main">
      <!-- Initial Page, "data-name" contains page name -->
      <div data-name="venda-pedido" class="page color-theme-blue">
        <!-- NAV TOPO-->
        <div class="top-nav">
          <div class="left">
            <img src="img/logo-nav.png" class="title-logo" width="130px" style="margin-left: 10px;" />
          </div>
          <!-- Agrupe os ícones em uma div -->
          <div class="right-icons">
            <!-- Botão de Notificações -->
            <div class="btn-notificacao" data-count="0" onclick="app.views.main.router.navigate('/notificacoes/')">
              <i class="mdi mdi-bell-outline"></i>
            </div>
            <!-- Botão do Carrinho -->
            <div class="btn-cart" data-count="0" onclick="app.views.main.router.navigate('/carrinho/')">
              <i class="mdi mdi-cart-outline"></i>
            </div>
          </div>
        </div>

        <!-- Cabeçalho com título da página -->
        <div class="dashboard-header">
          <h1>Vendas e Pedidos</h1>
          <p>Gerencie suas vendas e acompanhe seus pedidos.</p>
        </div>

        <div class="page-content" style="background-color: #f7f9fa;">
          <div class="block no-margin-top">
            
            <!-- Container das abas -->
            <div class="tabs-container">
              <!-- Cabeçalho das abas -->
              <div class="tabs-header">
                <button class="tab-button active" data-tab="vendas">
                  <i class="mdi mdi-sale"></i>
                  <span>Vendas</span>
                </button>
                <button class="tab-button" data-tab="pedidos">
                  <i class="mdi mdi-file-check"></i>
                  <span>Pedidos</span>
                </button>
              </div>

              <!-- Conteúdo da aba Vendas -->
              <div id="tab-vendas" class="tab-content active">
                <!-- Filtros das Vendas -->
                <div class="filtros-vendas">
                  <div class="filtros-container">
                    
                    <!-- Campo de busca avançado -->
                    <div class="busca-container">
                      <div class="busca-wrapper">
                        <input 
                          id="buscaVendas" 
                          type="text" 
                          placeholder="Buscar por cliente, ID da venda..." 
                          autocomplete="off"
                          enterkeyhint="search"
                        />
                        <i class="busca-icon mdi mdi-magnify"></i>
                        <button id="limparBuscaVendas" class="limpar-busca-btn" style="display: none;">
                          <i class="mdi mdi-close"></i>
                        </button>
                      </div>
                    </div>

                    <!-- Filtros de status modernos -->
                    <div class="filtros-status">
                      <div class="filtros-header">
                        <span class="filtros-titulo">Status do Pedido</span>
                        <button id="limparFiltrosVendas" class="limpar-filtros-btn">
                          <i class="mdi mdi-refresh"></i> Limpar
                        </button>
                      </div>
                      
                      <div class="filtros-botoes">
                        <button class="filtro-btn ativo" data-status="todos">
                          <i class="mdi mdi-format-list-bulleted"></i>
                          <span>Todos</span>
                          <span class="contador" id="contadorTodosVendas">0</span>
                        </button>
                        
                        <button class="filtro-btn" data-status="pendente">
                          <i class="mdi mdi-clock-outline"></i>
                          <span>Pendente</span>
                          <span class="contador" id="contadorPendenteVendas">0</span>
                        </button>
                        
                        <button class="filtro-btn" data-status="autorizado">
                          <i class="mdi mdi-check-circle-outline"></i>
                          <span>Autorizado</span>
                          <span class="contador" id="contadorAutorizadoVendas">0</span>
                        </button>
                        
                        <button class="filtro-btn" data-status="cancelado">
                          <i class="mdi mdi-close-circle-outline"></i>
                          <span>Cancelado</span>
                          <span class="contador" id="contadorCanceladoVendas">0</span>
                        </button>
                        
                        <button class="filtro-btn" data-status="bloqueado">
                          <i class="mdi mdi-alert-circle-outline"></i>
                          <span>Bloqueado</span>
                          <span class="contador" id="contadorBloqueadoVendas">0</span>
                        </button>
                      </div>
                    </div>

                    <!-- Filtros adicionais -->
                    <div class="filtros-adicionais">
                      <div class="filtro-data">
                        <label for="filtroDataVendas">Período:</label>
                        <select id="filtroDataVendas">
                          <option value="todos">Todos os períodos</option>
                          <option value="hoje">Hoje</option>
                          <option value="semana">Última semana</option>
                          <option value="mes">Último mês</option>
                          <option value="trimestre">Último trimestre</option>
                        </select>
                      </div>
                      
                      <div class="filtro-valor">
                        <label for="filtroValorVendas">Valor:</label>
                        <select id="filtroValorVendas">
                          <option value="todos">Todos os valores</option>
                          <option value="baixo">Até R$ 50</option>
                          <option value="medio">R$ 50 - R$ 200</option>
                          <option value="alto">Acima de R$ 200</option>
                        </select>
                      </div>
                    </div>

                  </div>
                </div>

                <!-- Container das vendas -->
                <div class="container-order" id="container-vendas" style="margin-bottom: 120px; padding-bottom: 100px;">
                  <!-- Loading inicial -->
                  <div class="loading-skeleton">
                    <div class="skeleton-card" style="margin-bottom: 15px;">
                      <div style="height: 60px; background: #f0f0f0; border-radius: 8px; margin-bottom: 10px;"></div>
                      <div style="height: 20px; background: #f0f0f0; border-radius: 4px; margin-bottom: 8px; width: 70%;"></div>
                      <div style="height: 16px; background: #f0f0f0; border-radius: 4px; width: 50%;"></div>
                    </div>
                    <div class="skeleton-card" style="margin-bottom: 15px;">
                      <div style="height: 60px; background: #f0f0f0; border-radius: 8px; margin-bottom: 10px;"></div>
                      <div style="height: 20px; background: #f0f0f0; border-radius: 4px; margin-bottom: 8px; width: 70%;"></div>
                      <div style="height: 16px; background: #f0f0f0; border-radius: 4px; width: 50%;"></div>
                    </div>
                    <div class="skeleton-card" style="margin-bottom: 15px;">
                      <div style="height: 60px; background: #f0f0f0; border-radius: 8px; margin-bottom: 10px;"></div>
                      <div style="height: 20px; background: #f0f0f0; border-radius: 4px; margin-bottom: 8px; width: 70%;"></div>
                      <div style="height: 16px; background: #f0f0f0; border-radius: 4px; width: 50%;"></div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Conteúdo da aba Pedidos -->
              <div id="tab-pedidos" class="tab-content">
                <!-- Filtros dos Pedidos -->
                <div class="filtros-pedidos">
                  <div class="filtros-container">
                    
                    <!-- Campo de busca avançado -->
                    <div class="busca-container">
                      <div class="busca-wrapper">
                        <input 
                          id="buscaPedidos" 
                          type="text" 
                          placeholder="Buscar por número do pedido, produtos..." 
                          autocomplete="off"
                          enterkeyhint="search"
                        />
                        <i class="busca-icon mdi mdi-magnify"></i>
                        <button id="limparBuscaPedidos" class="limpar-busca-btn" style="display: none;">
                          <i class="mdi mdi-close"></i>
                        </button>
                      </div>
                    </div>

                    <!-- Filtros de status modernos -->
                    <div class="filtros-status">
                      <div class="filtros-header">
                        <span class="filtros-titulo">Status do Pedido</span>
                        <button id="limparFiltrosPedidos" class="limpar-filtros-btn">
                          <i class="mdi mdi-refresh"></i> Limpar
                        </button>
                      </div>
                      
                      <div class="filtros-botoes">
                        <button class="filtro-btn ativo" data-status="todos">
                          <i class="mdi mdi-format-list-bulleted"></i>
                          <span>Todos</span>
                          <span class="contador" id="contadorTodosPedidos">0</span>
                        </button>
                        
                        <button class="filtro-btn" data-status="pendente">
                          <i class="mdi mdi-clock-outline"></i>
                          <span>Pendente</span>
                          <span class="contador" id="contadorPendentePedidos">0</span>
                        </button>
                        
                        <button class="filtro-btn" data-status="autorizado">
                          <i class="mdi mdi-check-circle-outline"></i>
                          <span>Autorizado</span>
                          <span class="contador" id="contadorAutorizadoPedidos">0</span>
                        </button>
                        
                        <button class="filtro-btn" data-status="cancelado">
                          <i class="mdi mdi-close-circle-outline"></i>
                          <span>Cancelado</span>
                          <span class="contador" id="contadorCanceladoPedidos">0</span>
                        </button>
                        
                        <button class="filtro-btn" data-status="bloqueado">
                          <i class="mdi mdi-alert-circle-outline"></i>
                          <span>Bloqueado</span>
                          <span class="contador" id="contadorBloqueadoPedidos">0</span>
                        </button>
                      </div>
                    </div>

                    <!-- Filtros adicionais -->
                    <div class="filtros-adicionais">
                      <div class="filtro-data">
                        <label for="filtroDataPedidos">Período:</label>
                        <select id="filtroDataPedidos">
                          <option value="todos">Todos os períodos</option>
                          <option value="hoje">Hoje</option>
                          <option value="semana">Última semana</option>
                          <option value="mes">Último mês</option>
                          <option value="trimestre">Último trimestre</option>
                        </select>
                      </div>
                      
                      <div class="filtro-valor">
                        <label for="filtroValorPedidos">Valor:</label>
                        <select id="filtroValorPedidos">
                          <option value="todos">Todos os valores</option>
                          <option value="baixo">Até R$ 50</option>
                          <option value="medio">R$ 50 - R$ 200</option>
                          <option value="alto">Acima de R$ 200</option>
                        </select>
                      </div>
                    </div>

                  </div>
                </div>

                <!-- Container dos pedidos -->
                <div class="container-order" id="container-pedidos" style="margin-bottom: 120px; padding-bottom: 100px;">
                  <!-- Loading inicial -->
                  <div class="loading-skeleton">
                    <div class="skeleton-card" style="margin-bottom: 15px;">
                      <div style="height: 60px; background: #f0f0f0; border-radius: 8px; margin-bottom: 10px;"></div>
                      <div style="height: 20px; background: #f0f0f0; border-radius: 4px; margin-bottom: 8px; width: 70%;"></div>
                      <div style="height: 16px; background: #f0f0f0; border-radius: 4px; width: 50%;"></div>
                    </div>
                    <div class="skeleton-card" style="margin-bottom: 15px;">
                      <div style="height: 60px; background: #f0f0f0; border-radius: 8px; margin-bottom: 10px;"></div>
                      <div style="height: 20px; background: #f0f0f0; border-radius: 4px; margin-bottom: 8px; width: 70%;"></div>
                      <div style="height: 16px; background: #f0f0f0; border-radius: 4px; width: 50%;"></div>
                    </div>
                    <div class="skeleton-card" style="margin-bottom: 15px;">
                      <div style="height: 60px; background: #f0f0f0; border-radius: 8px; margin-bottom: 10px;"></div>
                      <div style="height: 20px; background: #f0f0f0; border-radius: 4px; margin-bottom: 8px; width: 70%;"></div>
                      <div style="height: 16px; background: #f0f0f0; border-radius: 4px; width: 50%;"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Path to Framework7 Library Bundle JS-->
  <script type="text/javascript" src="lib/framework7-bundle.min.js"></script>
  <!-- jQuery -->
  <script type="text/javascript" src="lib/jquery-3.7.0.min.js"></script>
  <!-- Roteamento do app-->
  <script type="text/javascript" src="js/routes.js"></script>
  <script src="cordova.js"></script>

  <script>
    // Função para alternar entre as abas
    function switchTab(tabName) {
      // Remove a classe active de todos os botões e conteúdos
      $('.tab-button').removeClass('active');
      $('.tab-content').removeClass('active');
      
      // Adiciona a classe active ao botão e conteúdo selecionados
      $(`[data-tab="${tabName}"]`).addClass('active');
      $(`#tab-${tabName}`).addClass('active');
      
      // Carrega os dados da aba selecionada
      if (tabName === 'vendas') {
        if (!window.vendasLoaded) {
          listarVendas();
          window.vendasLoaded = true;
        }
      } else if (tabName === 'pedidos') {
        if (!window.pedidosLoaded) {
          listarPedidos();
          window.pedidosLoaded = true;
        }
      }
    }

    // Event listeners para as abas
    $(document).ready(function() {
      $('.tab-button').on('click', function() {
        const tabName = $(this).data('tab');
        switchTab(tabName);
      });

      // Carrega vendas por padrão
      switchTab('vendas');
    });
  </script>
</body>

</html>